<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="https://inwapi.github.io/">หน้าเเรก</a></li>
                <li><a href="https://inwapi.github.io/">api</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>




    <?php
// include 'header.php'; // แทรก header ตามความต้องการ

// ตรวจสอบว่ามีการส่งข้อมูลมาหรือไม่
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $name = $_POST['name']; // รับค่าจากฟอร์ม name
    $urlContent = $_POST['editor1']; // รับค่าจาก CKEditor

    // ตรวจสอบและสร้างโฟลเดอร์ถ้ายังไม่มี
    $folderName = 'playerdata';
    if (!file_exists($folderName)) {
        mkdir($folderName, 0777, true); // สร้างโฟลเดอร์ด้วยสิทธิ์การเข้าถึงเต็มรูปแบบ
    }

    // สร้าง ID ที่ไม่ซ้ำกันสำหรับแต่ละไฟล์
    do {
        $uniqueID = substr(md5(mt_rand()), 0, 6); // สร้าง ID แบบสุ่ม 4 ตัวอักษร
        $fileName = $folderName . '/' . $uniqueID . '.json'; // กำหนดชื่อไฟล์ด้วย ID และเส้นทางโฟลเดอร์
    } while (file_exists($fileName)); // ทำซ้ำหากไฟล์ด้วย ID เดียวกันมีอยู่แล้ว

    // สร้าง array ข้อมูล
    $data = array(
        "ID" => $uniqueID,
        "Name" => $name,
        "URL" => $urlContent
    );

    // แปลงข้อมูลเป็น JSON
    $json_data = json_encode($data, JSON_PRETTY_PRINT | JSON_UNESCAPED_SLASHES);

    // บันทึกข้อมูลลงในไฟล์ JSON โดยใช้ชื่อไฟล์ที่กำหนด
    if(file_put_contents($fileName, $json_data)) {
        echo "Data saved successfully to " . $fileName;
    } else {
        echo "Error saving data";
    }
}
?>

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.ckeditor.com/4.5.11/standard/ckeditor.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
</head>
<body>

<div class="container">
    <form action="" method="post">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" name="name">
        </div>
        <div class="form-group">
            <label for="editor1">URL:</label>
            <textarea class="form-control" name="editor1" id="editor1" rows="10" cols="80"></textarea>
            <script>
                CKEDITOR.replace('editor1');
            </script>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
</div>

</body>
</html>


    

    

    <footer>
        <p>&copy; 2024 My Portfolio. All rights reserved.</p>
    </footer>
    
</body>
</html>
